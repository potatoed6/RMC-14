- type: entity
  parent: RMCBarrelAttachmentBase
  id: RMCSichAttachmentBarrelGrenadeLauncher
  name: ствольний гранатомет
  description: Старинна технологія пускання гранат за допомогою ствола. Виключно для М4СПР. # and accuracy.
  components:
  - type: Sprite
    sprite: _Sich/Objects/Weapons/Guns/Attachments/barrel.rsi
    layers:
      - state: blauncher-loaded
        map: ["enum.GunVisualLayers.Mag"]
  - type: Tag
    tags:
    - RMCAttachmentBarrel
    - RMCSichAttachmentBarrelGrenadeLauncher
  - type: AttachableVisuals
  - type: AttachableWeaponRangedMods
    modifiers:
    - conditions:
        wieldedOnly: true
      accuracyAddMult: -0.2
  - type: AttachableWieldDelayMods
    modifiers:
    - delay: 0.4
  - type: ContainerContainer
    containers:
      ballistic-ammo: !type:Container
        ents: []
  - type: RMCAmmoEject
    containerID: ballistic-ammo
    ejectSound:
      path: /Audio/_RMC14/Weapons/Guns/Reload/grenade_insert.ogg
  - type: AmmoCounter
  - type: Gun
    projectileSpeed: 20
    soundGunshot:
      path: /Audio/_RMC14/Weapons/Guns/Gunshots/gun_ugl.ogg
    resetOnHandSelected: false
  - type: RMCSelectiveFire
    baseFireRate: 0.417
  - type: GunIgnorePrediction
  - type: GunIFF
    enabled: true
  - type: Appearance
  - type: GenericVisualizer
    visuals:
      enum.GunVisualLayers.Mag:
        enum.GunVisualLayers.Mag:
          True: { state: blauncher-empty }
          False: { state: blauncher-loaded }
  - type: BallisticAmmoProvider
    cycleable: false
    whitelist:
      tags:
      - RMCGrenadeM40
    capacity: 1
    soundInsert:
      path: /Audio/_RMC14/Weapons/Guns/Reload/grenade_insert.ogg
      params:
        volume: -2
  - type: OnShootTriggerAmmoTimer
    delay: 1.5
    beepInterval: 2
    initialBeepDelay: 0
    beepSound:
      path: "/Audio/Effects/beep1.ogg"
      params:
        volume: 5
    timerStart: enum.TimerStartMode.OnHitGround
  - type: ShootAtFixedPoint
    shootArcProj: true
    maxFixedRange: 7
  - type: AttachableToggleable
    userOnly: true
    attachedOnly: true
    supercedeHolder: true
    wieldedUseOnly: true
    activatePopupText: attachable-popup-switch-to-generic
    deactivatePopupText: attachable-popup-switch-from-generic
    actionName: Switch to the U1 Grenade Launcher
    actionDesc: Switch to using the underbarrel grenade launcher.
    icon:
      sprite: _RMC14/Objects/Weapons/Guns/Attachments/under.rsi
      state: grenade
    iconActive:
      sprite: _RMC14/Objects/Weapons/Guns/Attachments/under.rsi
      state: grenade-on
  - type: WieldedCrosshair
    rsi:
      sprite: _RMC14/Interface/MousePointer/explosive_mouse.rsi
      state: all
# add tag!!!!

- type: Tag
  id: RMCSichAttachmentBarrelGrenadeLauncher